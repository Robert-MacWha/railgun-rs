- [x] Implement unshielding
- [x] Fix event tracker so it works with unshielding
- [x] Implement builder pattern for shields / transactions
- [x] Implement transfer
- [x] Create integration test that uses anvil for shield, balance check, unshield
- Implement PPOI
  - [x] Get POI for a shield note
  - [x] Get the TXID merkle tree
    - [x] Setup syncing to download TXID merkle tree from subsquid
    - [x] Verify the root against the poi API
- [x] Fix the transact integration test
- [ ] Impl managed merkle trees that are dependency-injected into the indexer.  This way the merkle trees can verify / save / manage themselves and the indexer can just call them.
  - [ ] Generate POI proof inputs for a transfer operation
  - [ ] Send to a broadcaster
  - [ ] Send a POI for a transfer note 
- [ ] Implement broadcasters
- [ ] Refactor and tidy up
  - [x] Pick and STICK WITH a consistent type for representing proof values / amounts. Right now I'm in conversion hell.  ruint seems like a good choice.
- Optimize performance
  - Benchmark current performance + components
  - [x] Try to use `https://github.com/philsippl/circom-witness-rs` for witness generation.  Seems to be ~30x faster for native, and probably faster for wasm too since we avoid wasmer overhead.
    - ~~https://zkmopro.org/blog/circom-comparison/#witnesscalc~~
    - ~~Will be very challenging since (a) I want this to be wasm32-wasip1 an (ideally) wasm32-unknown-unknown compatible, AND because I'll need to re-compile the circuits and they used an old version of circom. But if it works it'll be a significant performance improvement and properly cross-platform.~~
    - ~~Alternatively, I know that `rust-witness` can work for native.  But I'm pretty sure the portable c it generates isn't compatible with wasm.~~
    - ~~https://lib.rs/crates/circom-witnesscalc might work since it seems like it's a pure rust impl.  But idk if I'll be able to compile the circuits into its format~~
    - It seems like using any of these won't work, because either (a) they use c/c++ or (b) they rely on newer versions of circom that aren't compatible with the original circuit zkeys.
      - circom-witness-rs would work perfectly, but only works with circom v2.2+.  The generated witnesses are different across ~170 points, which is infuriatingly small.
      - rust-witness and circom-witnesscale both rely on c/c++ code.  
    - The final solution might be wasmi.  I can generate the witness from the wasm.  So just fork ark-circom's `WitnessCalculator` and swap wasmer for wasmi.  I already know that can run in wasm environments.  It won't be as fast as native by a long shot, but it will work.  And I could always provide APIs for users to dependency-inject their own witness generators so in web environments they can just use snarkjs or something directly.
- Get working tested on WASM
  - Try switching to `https://github.com/iden3/circom-witnesscalc/tree/045320ecbafbff0617ab37eb6d85950ea8cc15ef`.  Need to fork it
  - to disable some C api stuff, but it might be possible?
- Implement native token support for shield / unshield
- Implement NFT support for shield / unshield / transfer
- Stop storing the private keys everywhere