- [x] Implement unshielding
- [x] Fix event tracker so it works with unshielding
- [x] Implement builder pattern for shields / transactions
- [x] Implement transfer
- [x] Create integration test that uses anvil for shield, balance check, unshield
- Implement PPOI
  - [x] Get POI for a shield note
  - [x] Get the TXID merkle tree
    - [x] Setup syncing to download TXID merkle tree from subsquid
    - [x] Verify the root against the poi API
- [x] Fix the transact integration test
- [x] Finish implementing JS SDK
- [x] Setup broadcasters in JS SDK
  - Seems like waku's rust SDK is pretty bad, so we should just use the JS one and worry about native support later.
- [x] Generate POI proof inputs for a transfer operation
- [x] Send to a broadcaster
  - Figure out why I'm getting a `No Broadcaster Fee included in transaction.` response from the broadcaster. My fee must
  - not be being included properly
- [x] Send a POI for a transfer note 
- [ ] Make managed merke trees that verify themselves
  - Should be simple, but will help quite a bit for the next task.
- [ ] Implement a json-rpc txid syncer
  - Needs to do call trace, parsing logs by hand since each `transaction` is the group of all operations in a given block.
- [ ] Refactor and tidy up
- [ ] Seperate private key management into a seperate signer struct + trait, so we can stop passing private keys around everywhere.


- Optimize performance / size
  - Benchmark current performance + components
  - [x] Try to use `https://github.com/philsippl/circom-witness-rs` for witness generation.  Seems to be ~30x faster for native, and probably faster for wasm too since we avoid wasmer overhead.
    - ~~https://zkmopro.org/blog/circom-comparison/#witnesscalc~~
    - ~~Will be very challenging since (a) I want this to be wasm32-wasip1 an (ideally) wasm32-unknown-unknown compatible, AND because I'll need to re-compile the circuits and they used an old version of circom. But if it works it'll be a significant performance improvement and properly cross-platform.~~
    - ~~Alternatively, I know that `rust-witness` can work for native.  But I'm pretty sure the portable c it generates isn't compatible with wasm.~~
    - ~~https://lib.rs/crates/circom-witnesscalc might work since it seems like it's a pure rust impl.  But idk if I'll be able to compile the circuits into its format~~
    - It seems like using any of these won't work, because either (a) they use c/c++ or (b) they rely on newer versions of circom that aren't compatible with the original circuit zkeys.
      - circom-witness-rs would work perfectly, but only works with circom v2.2+.  The generated witnesses are different across ~170 points, which is infuriatingly small.
      - rust-witness and circom-witnesscale both rely on c/c++ code.  
    - The final solution might be wasmi.  I can generate the witness from the wasm.  So just fork ark-circom's `WitnessCalculator` and swap wasmer for wasmi.  I already know that can run in wasm environments.  It won't be as fast as native by a long shot, but it will work.  And I could always provide APIs for users to dependency-inject their own witness generators so in web environments they can just use snarkjs or something directly.
- [x] Get working tested on WASM
  - Try switching to `https://github.com/iden3/circom-witnesscalc/tree/045320ecbafbff0617ab37eb6d85950ea8cc15ef`.  Need to fork it
  - to disable some C api stuff, but it might be possible?
- Implement native token support for shield / unshield
- Implement NFT support for shield / unshield / transfer
- Stop storing the private keys everywhere